<h1><%= @user.username %></h1>

<dl>
  <dt>ID</dt>
    <dd><%= @user.id %></dd>

  <dt>Name</dt>
    <dd><%= @user.name %></dd>

  <dt>Age</dt>
    <dd><%= @user.age %></dd>
</dl>

<h2>Record a trip!</h2>
<% if session.fetch(:user_id) == @user.id %>
<form action="/insert_visit">
<div>
  <label for="visit_destination">Where did you go?</label>
  <input id="visit_destination" type="text" name="query_destination_visited" placeholder="Enter a destination">
</div>
<div>
  <label for="visit_year">When did you go?</label>
  <input id="visit_year" type="text" name="query_year_visited" placeholder="Enter a year">
</div>
  <button>Confirm visit</button>
</form>
<hr>
<% end %>

<h2><%= @user.username %>'s trips</h2>

<table border="1">
  <tr>
    <th>
      Year
    </th>
   
    <th>
      Country
    </th>

    <th>
      Country facts
    </th>
  </tr>

  
  <% @user.own_visits.each do |trip| %>

  <tr>

    <td>
      <%= trip.year %>
    </td>

    <td>
      <% matching_countries = Country.where( {:id => trip.country_id}) %>
      <% trip_country = matching_countries.at(0) %>

      <%= trip_country.name %>
    </td>

    <td>
      <a href="/countries/<%= trip.country_id %>">Show details</a>
    </td>

  </tr>

  <% end %>
</table>
